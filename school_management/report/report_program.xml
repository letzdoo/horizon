<?xml version="1.0" encoding="utf-8" ?>
<!--
##############################################################################
#
#    Copyright (c) 2023 ito-invest.lu
#                       Jerome Sonnet <jerome.sonnet@ito-invest.lu>
#
#    This program is free software: you can redistribute it and/or modify
#    it under the terms of the GNU Affero General Public License as
#    published by the Free Software Foundation, either version 3 of the
#    License, or (at your option) any later version.
#
#    This program is distributed in the hope that it will be useful,
#    but WITHOUT ANY WARRANTY; without even the implied warranty of
#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#    GNU Affero General Public License for more details.
#
#    You should have received a copy of the GNU Affero General Public License
#    along with this program.  If not, see <http://www.gnu.org/licenses/>.
#
##############################################################################
-->
<odoo>

    <!-- report -->
    <!-- <report id="report_program" model="school.program" string="Program" report_type="qweb-pdf" name="school_management.report_program_details_content" file="school_management.report_program_details_content" /> -->

    <!-- Style PDF report -->
<template id="common_style_documents">
    <t t-set="primary" t-value="env.company.primary_color or 'black'" />
    <t t-set="secondary" t-value="env.company.secondary_color or 'black'" />

    <style>
        .colored-primary {
            color: <t t-esc="primary" /> !important;
        }
        .colored-secondary {
            color: <t t-esc="secondary" /> !important;
        }
        .colored-grey {
            color: #6e6e6e;
        }
        .case td, .case th {
            padding: 1mm;
        }
        .p-0 {
            padding: 0 !important;
        }
        .p-1 {
            padding: 1mm !important;
        }
        .p-2 {
            padding: 2mm !important;
        }
        .p-3 {
            padding: 3mm !important;
        }
        .p-4 {
            padding: 4mm !important;
        }
        .p-5 {
            padding: 5mm !important;
        }
        .m-0 {
            margin 0 !important;
        }
        .m-1 {
            margin 1mm !important;
        }
        .m-2 {
            margin 2mm !important;
        }
        .m-3 {
            margin 3mm !important;
        }
        .m-4 {
            margin 4mm !important;
        }
        .m-5 {
            margin 5mm !important;
        }
        .pt-0 {
            padding-top: 0 !important;
        }
        .pt-1 {
            padding-top: 1mm !important;
        }
        .pt-2 {
            padding-top: 2mm !important;
        }
        .pt-3 {
            padding-top: 3mm !important;
        }
        .pt-4 {
            padding-top: 4mm !important;
        }
        .pt-5 {
            padding-top: 5mm !important;
        }
        .mt-0 {
            margin-top: 0 !important;
        }
        .mt-1 {
            margin-top: 1mm !important;
        }
        .mt-2 {
            margin-top: 2mm !important;
        }
        .mt-3 {
            margin-top: 3mm !important;
        }
        .mt-4 {
            margin-top: 4mm !important;
        }
        .mt-5 {
            margin-top: 5mm !important;
        }
        .pb-0 {
            padding-bottom: 0 !important;
        }
        .pb-1 {
            padding-bottom: 1mm !important;
        }
        .pb-2 {
            padding-bottom: 2mm !important;
        }
        .pb-3 {
            padding-bottom: 3mm !important;
        }
        .pb-4 {
            padding-bottom: 4mm !important;
        }
        .pb-5 {
            padding-bottom: 5mm !important;
        }
        .mb-0 {
            margin-bottom: 0 !important;
        }
        .mb-1 {
            margin-bottom: 1mm !important;
        }
        .mb-2 {
            margin-bottom: 2mm !important;
        }
        .mb-3 {
            margin-bottom: 3mm !important;
        }
        .mb-4 {
            margin-bottom: 4mm !important;
        }
        .mb-5 {
            margin-bottom: 5mm !important;
        }
        .pl-0 {
            padding-left: 0 !important;
        }
        .pl-1 {
            padding-left: 1mm !important;
        }
        .pl-2 {
            padding-left: 2mm !important;
        }
        .pl-3 {
            padding-left: 3mm !important;
        }
        .pl-4 {
            padding-left: 4mm !important;
        }
        .pl-5 {
            padding-left: 5mm !important;
        }
        .ml-0 {
            margin-left 0 !important;
        }
        .ml-1 {
            margin-left 1mm !important;
        }
        .ml-2 {
            margin-left 2mm !important;
        }
        .ml-3 {
            margin-left 3mm !important;
        }
        .ml-4 {
            margin-left 4mm !important;
        }
        .ml-5 {
            margin-left 5mm !important;
        }
        .pr-0 {
            padding-right: 0 !important;
        }
        .pr-1 {
            padding-right: 1mm !important;
        }
        .pr-2 {
            padding-right: 2mm !important;
        }
        .pr-3 {
            padding-right: 3mm !important;
        }
        .pr-4 {
            padding-right: 4mm !important;
        }
        .pr-5 {
            padding-right: 5mm !important;
        }
        .mr-0 {
            margin-right: 0 !important;
        }
        .mr-1 {
            margin-right: 1mm !important;
        }
        .mr-2 {
            margin-right: 2mm !important;
        }
        .mr-3 {
            margin-right: 3mm !important;
        }
        .mr-4 {
            margin-right: 4mm !important;
        }
        .mr-5 {
            margin-right: 5mm !important;
        }

        .text-regular {
            font-weight: 400;
        }
        .text-bold {
            font-weight: 600;
        }
        .text-italic {
            font-style: italic;
        }
        .text-align-left {
            text-align: left;
        }
        .text-align-center {
            text-align: center;
        }
        .text-align-right {
            text-align: right;
        }
        thead,
        tbody,
        tr,
        th,
        td {
            border: 0;
        }
   
        th,
        td {
            vertical-align: top;
        }
        .case {
            border: 1px solid #eaeaea;
        }
        .border-top-grey {
            border-top: 1px solid #eaeaea !important;
        }
        .border-bottom-grey {
            border-bottom: 1px solid #eaeaea !important;
        }
        .border-left-grey {
            border-left: 1px solid #eaeaea !important;
        }
        .border-right-grey {
            border-right: 1px solid #eaeaea !important;
        }
        .text-capitalized {
            text-transform: capitalize;
        }
        .font-size-0_7 {
            font-size: 0.7em !important;
        }
        .font-size-0_8 {
            font-size: 0.8em !important;
        }
        .font-size-0_9 {
            font-size: 0.9em !important;
        }
        .font-size-1_2 {
            font-size: 1.2em !important;
        }
        .font-size-1_3 {
            font-size: 1.3em !important;
        }
        .font-size-1_4 {
            font-size: 1.4em !important;
        }
        .w-100 {
            width: 100%;
        }
        .d-block {
            display: block;
        }
        .row {
            display: -webkit-box; /* wkhtmltopdf uses this one */
            display: flex;
            -webkit-box-pack: center; /* wkhtmltopdf uses this one */
            justify-content: center;
        }

        .row > div {
            -webkit-box-flex: 1;
            -webkit-flex: 1;
            flex: 1;
        }

        .row > div:last-child {
            margin-right: 0;
        }
        table {
            border-collapse: collapse; 
        }
  
        .table-row-title th,
        .table-row-title td {
            vertical-align: middle;
        }
        .white-space-nowrap {
            white-space: nowrap;
        }
    </style>
</template>


<!-- Header & footer PDF report -->
<template id="header_footer_document">
    <t t-set="primary" t-value="env.company.primary_color or 'black'" />
    <t t-set="secondary" t-value="env.company.secondary_color or 'black'" />
 
     <xpath expr="//title" position="replace">
          <title><t t-esc="docs[0].title or 'Odoo Report'"/></title>
    </xpath>

    <div class="header" style="padding-top: 10mm !important;">
        <div class="row" t-attf-style="padding-bottom: 5mm !important; border-bottom: 1px solid {{secondary}};">
            <div class="col-8" style="display: -webkit-box;">
                <img style="max-height: 15mm !important;" t-if="env.company.logo" t-att-src="image_data_uri(env.company.logo)"/>
                <h3 style="font-size: 24px; padding-top: 3mm !important; padding-left: 6mm; color: #6e6e6e;" t-esc="env.company.name"/>
            </div>
            <div class="col-4" style="display: -webkit-box;-webkit-box-pack: end;">
                <img style="max-height: 15mm !important;" src="/school_management/static/src/img/WBE_logo_horizontal.png"/>
           </div>
        </div>
    </div>

    <div class="article o_report_layout_standard">
        <t t-call="school_management.common_style_documents" />
        <t t-raw="0" />
    </div>

    <div class="footer" t-attf-style="border-top: 1px solid {{secondary}}; padding-top: 4mm !important; font-size: 0.7em; color: #6e6e6e;">
        <div class="row">
            <div class="col-10">
                <p>
                    <t t-esc="env.company.website"/>
                    <span t-attf-style="color: {{primary}}; padding-left: 1mm !important; padding-right: 1mm !important;">|   </span>
                    <t t-esc="env.company.email"/>
                    <span t-attf-style="color: {{primary}}; padding-left: 1mm !important; padding-right: 1mm !important;">|   </span>
                    <t t-esc="env.company.street"/>
                    <t t-esc="env.company.street2"/>
                    -
                    <t t-esc="env.company.zip"/>
                    <t t-esc="env.company.city"/>
                </p>
            </div>
            <div class="col-2" style="display: flex; display: -webkit-box; -webkit-box-pack : end; text-align: right;">
                  Page&amp;nbsp;:&amp;nbsp;<span class="page"/>&amp;nbsp;/&amp;nbsp;<span class="topage"/>
            </div>
        </div>
    </div>
</template>

    <template id="website_program_details_content" name="Program Details Content">
        
        <section class="row">
            <div class="col-md-4"><h4>PROFIL D’ENSEIGNEMENT</h4></div>
            <div class="col-md-6"><h4><t t-esc="program.name" /></h4></div>
            <div class="col-md-2"><h4><t t-esc="program.year_id.name" /></h4></div>
        </section>
        <hr/>
        <section>
            <div class="row">
                <div class="col-md-2"><font color="grey">DOMAINE</font></div>
                <div class="col-md-10"><t t-esc="program.domain_name" /></div>
            </div>
            <div class="row">
                <div class="col-md-2"><font color="grey">CYCLE</font></div>
                <div class="col-md-10"><t t-esc="program.cycle_id.name" /></div>
            </div>
            <div class="row">
                <div class="col-md-2"><font color="grey">SECTION</font></div>
                <div class="col-md-10"><t t-esc="program.speciality_id.section_id.name" /></div>
            </div>
            <div class="row">
                <div class="col-md-2"><font color="grey">ORIENTATION</font></div>
                <div class="col-md-10"><t t-esc="program.speciality_id.track_id.name" /></div>
            </div>
            <div class="row">
                <div class="col-md-2"><font color="grey">SPÉCIALITÉ</font></div>
                <div class="col-md-10"><t t-esc="program.speciality_id.name" /></div>
            </div>
        </section>
        <hr/>
        <section class="row" t-if="program.description">
            <div class="col-md-12"><h4>VADE MECUM</h4></div>
            <div class="col-md-12" style='white-space: pre-wrap;'><t t-esc="program.description"/></div>
            <hr/>
        </section>
        <!--<section class="row" t-if="program.competency_ids">
            <div class="col-md-12"><h4>RÉFÉRENTIELS DE COMPÉTENCES ATTENDUES</h4></div>
            <div class="col-md-12">
                <table class="table table-striped">
                    <caption>A la fin du cycle, l’étudiant doit être capable :</caption>
                    <col width='50px'/>
                    <col width="100%"/><t t-set="comp_cnt" t-value="0"/>
                    <tr t-foreach="program.competency_ids" t-as="comp"><t t-set="comp_cnt" t-value="comp_cnt+1"/>
                        <th scope="row"><bold><t t-esc="comp_cnt"/></bold></th><td><t t-esc="comp.description"/></td>
                    </tr>
                </table>
            </div>
            <hr/>
        </section>-->
        <section class="row">
            <div class="col-md-12">
                <h4>PROGRAMME DES COURS</h4>
            </div>
        </section>
        <section class="row" t-foreach="program.bloc_ids" t-as="bloc">
            <t t-call="school_management.website_school_bloc"/>
        </section>
        <hr/>
    </template>

    <template id="website_school_bloc" name="Bloc">
        <div class="col-md-12">
            <table class="table table-condensed oe_school_program_table">
                <caption style="font-size: 100%;">Grille du bloc - <t t-esc="bloc.name"/></caption>
                <colgroup>
                    <col style="width:75px"/>
                    <col style="width:400px"/>
                    <col style="width:60px"/>
                    <col style="width:60px"/>
                    <col style="width:60px"/>
                    <col style="width:150px"/>
                    <col style="width:150px"/>
                </colgroup>
                <thead>
                    <tr>
                        <th>Code UE</th> 
                        <th>Unités d’enseignement</th> 
                        <th class="text-center">Heures</th> 
                        <th class="text-center">ECTS</th>
                        <th class="text-center">Pond</th>
                        <th>Pré-requis</th>
                        <th>Co-requis</th>
                    </tr> 
                </thead>
                <tbody>
                    <t t-foreach="bloc.course_group_ids" t-as="course_group">
                    <tr class="oe_school_course_group">
                        <td><t t-esc="course_group.uid"/></td>
                        <td><t t-esc="course_group.title"/><br/><i style="color:grey;"><t t-esc="course_group.responsible_id.name"/></i></td>
                        <td class="text-center"><t t-esc="course_group.total_hours"/></td>
                        <td class="text-center"><t t-esc="course_group.total_credits"/></td>
                        <td></td>
                        <td style="font-size: x-small;"><t t-if="course_group.pre_requisit_ids"><span t-esc="', '.join(map( lambda x: str(x.preriquisit_id.uid), course_group.pre_requisit_ids))"/></t></td>
                        <td style="font-size: x-small;"><t t-if="course_group.co_requisit_ids"><span t-esc="', '.join(map( lambda x: str(x.coriquisit_id.uid), course_group.co_requisit_ids))"/></t></td>
                    </tr>
                    <tr t-foreach="course_group.course_ids" t-as="course">
                        <td></td>
                        <td t-if="course.url_ref">
                            <a t-esc="course.title" data-toggle="modal" data-target="#noDescription" style="cursor: pointer;"/>
                            <br/><t t-foreach="course.teacher_ids" t-as="teacher"><i style="color:grey;" t-esc="teacher.name"/><t t-if="teacher_index &lt; (teacher_size - 1)">,</t></t>
                        </td>
                        <td t-if="not course.url_ref">
                            <a t-esc="course.title" data-toggle="modal" data-target="#noDescription" style="cursor: pointer;"/>
                            <br/><t t-foreach="course.teacher_ids" t-as="teacher"><i style="color:grey;"  t-esc="teacher.name"/><t t-if="teacher_index &lt; (teacher_size - 1)">,</t></t>
                        </td>
                        <td class="text-center"><t t-esc="course.hours"/></td>
                        <td class="text-center"><t t-esc="course.credits"/></td>
                        <td class="text-center"><t t-esc="course.weight"/></td>
                        <td></td>
                        <td></td>
                    </tr>
                    </t>
                    <tr>
                        <td></td>
                        <td class="text-right">Total :</td>
                        <td class="text-center"><t t-esc="bloc.total_hours"/></td>
                        <td class="text-center"><t t-esc="bloc.total_credits"/></td>
                        <td></td>
                        <td></td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </template>

    <template id="report_program_details_content">
        <t t-call="web.html_container">
            <t t-set="data_report_margin_top" t-value="45" />
            <t t-set="data_report_header_spacing" t-value="40" />
            <t t-foreach="docs" t-as="program">
            <t t-set="o" t-value="program"/> 
            <t t-call="web.external_layout">
                <div class="page">
                    <t t-call="school_management.website_program_details_content"/>
                </div>
            </t>
            </t>
        </t>
    </template>

    <report id="report_individual_bloc" model="school.individual_bloc" string="Individual Bloc Description" report_type="qweb-pdf" name="school_management.report_individual_bloc_content" file="school_management.report_individual_bloc_content" />

    <!--Email template -->
    <record id="email_template_report_individual_bloc" model="mail.template">
        <field name="name">Individual Bloc - Send by Email</field>
        <field name="email_to">${(object.student_id.email and '%s &lt;%s&gt;' % (object.student_id.name, object.student_id.email) or '')|safe}</field>
        <field name="subject">Individual Bloc</field>
        <field name="partner_to">${object.student_id.id}</field>
        <field name="model_id" ref="model_school_individual_bloc" />
        <field name="auto_delete" eval="True" />
        <field name="report_template" ref="report_individual_bloc" />
        <field name="report_name">Individual Bloc Details</field>
        <field name="lang">${object.student_id.lang}</field>
        <field name="body_html">
            <![CDATA[
                <div style="font-family: 'Lucida Grande', Ubuntu, Arial, Verdana, sans-serif; font-size: 12px; color: rgb(34, 34, 34); background-color: #FFF; ">
                    <p>Hello ${object.student_id.name},</p>
                    <br/>
                    <p>Your Individual Bloc details is attached to this email. </p>
                    <br/>
                    <p>If you have any question, do not hesitate to contact us.</p>
                    <br/>
                </div>
            ]]>
        </field>
    </record>

    <template id="school_bloc" name="Bloc">
        <div class="table-responsive" data-oe-model="school_bloc" t-att-data-oe-id="bloc.id">
            <table class="table table-sm oe_school_program_table">
                <colgroup>
                    <col style="width:150px"/>
                    <col style="width:55%"/>
                    <col style="width:60px"/>
                    <col style="width:60px"/>
                    <col style="width:60px"/>
                    <col style="width:100px"/>
                </colgroup>
                <thead style="display: table-row-group;">
                    <tr>
                        <th>Code UE</th> 
                        <th>Unités d’enseignement</th> 
                        <th class="text-center">Heures</th> 
                        <th class="text-center">ECTS</th>
                        <th class="text-center">Pond</th>
                        <!--
                        <th>Pré/Co-requis</th>-->
                        <th>Statut</th>
                    </tr> 
                </thead>
                <tbody>
                    <t t-foreach="bloc.course_group_ids" t-as="course_group">
                    <tr class="oe_school_course_group">
                        <td><t t-esc="course_group.uid"/></td>
                        <td><t t-esc="course_group.name"/></td>
                        <td class="text-center"><t t-esc="course_group.total_hours"/></td>
                        <td class="text-center"><t t-esc="course_group.total_credits"/></td>
                        <td></td>
                        <!--<td class="text-center">Aucun</td>-->
                        <td>
                            <t t-if="course_group.acquiered == 'A'">Valid.</t>
                        </td>
                    </tr>
                    <tr t-foreach="course_group.course_ids" t-as="course" class="font-italic">
                        <td></td>
                        <td t-if="course.url_ref"><a t-esc="course.title" t-att-href="course.url_ref" target="new"/></td>
                        <td t-if="not course.url_ref"><t t-esc="course.title"/></td>
                        <td class="text-center"><t t-esc="course.hours"/></td>
                        <td class="text-center"><!--<t t-esc="course.credits"/>--></td>
                        <td class="text-center"><t t-esc="course.weight"/></td>
                        <!--<td></td>-->
                        <td></td>
                    </tr>
                    </t>
                    <tr>
                        <td></td>
                        <td class="text-right">Total :</td>
                        <td class="text-center"><t t-esc="bloc.total_hours"/></td>
                        <td class="text-center"><t t-esc="bloc.total_credits"/></td>
                        <td></td>
                        <!--<td></td>-->
                        <td></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </template>
    
    <template id="report_assets_common" inherit_id="web.report_assets_common">
        <xpath expr="(//link)[last()]" position="after">
            <link rel="stylesheet" type="text/css" href="/school_management/static/src/css/pure-nr.css"/>
            <link rel="preconnect" href="https://fonts.googleapis.com"/>
            <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin=""/>
            <link href="https://fonts.googleapis.com/css2?family=Fira+Sans:ital,wght@0,200;0,400;0,600;1,200;1,400;1,600&amp;family=Fira+Sans:ital,wght@0,200;0,400;0,600;1,200;1,400;1,600&amp;family=Lato:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&amp;display=swap" rel="stylesheet"/>
            <link rel="stylesheet" type="text/css" href="/school_management/static/src/css/reports.css"/>        
        </xpath>
    </template>
    
    <template id="report_individual_bloc_content">
        <t t-set="company" t-value="docs.env.company"/>
        <t t-call="web.report_layout">
            <t t-foreach="docs" t-as="bloc">
                <div class="header">
                    <img alt="" src="/school_management/static/src/img/HeaderCRLG.png" title=""/>
                </div>
                <div class="article" t-att-data-oe-model="bloc and bloc._name" t-att-data-oe-id="bloc and bloc.id" t-att-data-oe-lang="bloc and bloc.env.context.get('lang')" style="margin: 0cm 1.5cm;">
                    <h2><t t-esc="bloc.name"/></h2>
                    <h4><t t-esc="bloc.source_bloc_id.name"/></h4>
                    <h5><t t-esc="bloc.uid"/></h5>
                    <table class="pure-table pure-table-horizontal horizon-table">
                      <colgroup>
                          <col style="width:180px"/>
                          <col style="width:650px"/>
                          <col style="width:120px"/>
                          <col style="width:120px"/>
                          <col style="width:120px"/>
                      </colgroup>
                      <thead>
                        <tr>
                          <th>
                            CODE UE
                          </th>
                          <th>
                            UNITéS D'ENSEIGNEMENT
                          </th>
                          <th>
                            HEURES
                          </th>
                          <th>
                            ECTS
                          </th>
                          <th>
                            POND
                          </th>
                        </tr>
                      </thead>
                      <t t-foreach="bloc.course_group_ids" t-as="course_group">
                      <tr class="major_row">
                        <td>
                          <t t-esc="course_group.source_course_group_id.uid"/>
                        </td>
                        <td>
                          <t t-esc="course_group.title"/>
                        </td>
                        <td>
                          <t t-esc="course_group.total_hours"/>
                        </td>
                        <td>
                          <t t-esc="course_group.total_credits"/>
                        </td>
                        <td>
                        </td>
                      </tr>
                      <t t-foreach="course_group.course_ids" t-as="course">
                      <tr class="minor_row">
                        <td>
                        </td>
                        <td>
                            <t t-esc="course.title"/>
                        </td>
                        <td>
                          <t t-esc="course.hours"/>
                        </td>
                        <td>
                        </td>
                        <td>
                          <t t-esc="course.weight"/>
                        </td>
                      </tr>
                      </t>
                      </t>
                      <tr class="major_row">
                          <td>
                          </td>
                          <td>
                            Total :
                          </td>
                          <td>
                            <t t-esc="bloc.total_hours"/>
                          </td>
                          <td>
                            <t t-esc="bloc.total_credits"/>
                          </td>
                          <td>
                          </td>
                        </tr>
                    </table>
                    <p/>
                    <p/>
                    <table class="pure-table">
                      <tr>
                        <td colspan="2" rowspan="1">
                          <p>
                              Date et signature de l'étudiant<br/>
                              Le <span t-esc="bloc.student_signature_date and bloc.student_signature_date.strftime('%d-%m-%Y')"/>
                          </p>
                          <img style="height:70px;width:210px;" t-att-src="bloc.student_signature and image_data_uri(bloc.student_signature)"/>
                        </td>
                      </tr>
                      <tr>
                        <td colspan="2" rowspan="1">
                          <p>Avis de la commission des études</p>
                          <p>
                              Programme annuel approuvé par la commission des études (séance(s) : ....................................
                              <!-- <t t-foreach="bloc.approuval_ids" t-as="app">
                                  <t t-esc="app.date.strftime('%d-%m-%Y')"/>
                                  <t t-if="not app_first and not app_last">
                                      , 
                                  </t>
                              </t> --> )
                          </p>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <p>
                              Signature de la/du président(e) de la commission des études
                          </p>
                          <div style="height:70px;width:210px;"/>
                          <!--<img style="height:70px;width:210px;" t-att-src="image_data_uri(company.director_signature)"/>-->
                        </td>
                        <td>
                          <p>
                             Signature de la/du secrétaire de la commission des études
                          </p>
                          <div style="height:70px;width:210px;"/>
                          <!--<img style="height:70px;width:210px;" t-att-src="image_data_uri(company.secretary_signature)"/>-->
                        </td>
                      </tr>
                    </table>
                    <p>Imprimé <span t-esc="datetime.datetime.now().strftime('%d-%m-%Y à %H:%M:%S')"/></p>
                </div>
            </t>
        </t>
    </template>

    <report id="report_attendance_for_student" model="school.individual_bloc" string="Attendance Report for Student" report_type="qweb-pdf" name="school_management.report_attendance_for_student_content" file="school_management.report_attendance_for_student_content"
        attachment_use="True" attachment="object.name+'-ATT-'+time.strftime('%d-%m-%Y')+'.pdf'" />

    <template id="report_attendance_for_student_content">
        <t t-call="web.html_container">
            <t t-set="data_report_margin_top" t-value="40" />
            <t t-set="data_report_header_spacing" t-value="35" />
            <t t-foreach="docs" t-as="o">
                <t t-call="web.external_layout">
                    <div class="page" style="padding-left: 50px;padding-right: 50px;">
                        <section class="text-center">
                            <h2>ATTENDANCE REPORT</h2>
                            <h2>ACADEMIC YEAR <span
                                    style="color:#495057;"
                                    t-field="o.year_id"
                                /></h2>
                        </section>
                        <hr />
                        <div style="font-size:20px;">
                          <section
                                class="col-12 text-center"
                                style="margin-top:180px;"
                            >
                                Je soussigné, Nathanaël HARCQ, Directeur du CONSERVATOIRE ROYAL DE LIEGE certifie par la présente que
                          </section>
                          <section style="margin-top:40px;">
                              <div class="col-12 text-center">
                                  <b><span t-field="o.student_id.name" />, né<t
                                            t-if="o.student_id.gender == 'female'"
                                        >e</t> le <span
                                            t-field="o.student_id.birthdate_date"
                                        /> à <span
                                            t-field="o.student_id.birthplace"
                                        /><t
                                            t-if="o.student_id.birthcountry"
                                        > (<t t-esc="o.student_id.birthcountry.name"></t>)</t></b>
                              </div>
                          </section>
                          <section style="margin-top:40px;padding-right:100px;padding-left:100px;">
                              <div class="col-12 text-center">
                                  est régulièrement inscrit<t
                                        t-if="o.student_id.gender == 'female'"
                                    >e</t> aux cours du jour de l'Enseignement Supérieur Artistique de type
                                  <span><t
                                            t-esc="'long' if o.source_bloc_id.cycle_id.type=='long' else 'court'"
                                        /></span> pour l'année <span
                                        t-field="o.year_id"
                                    />.
                                  <p style="margin-top:10px;">
                                      Les cours sont donnés du 14 septembre au 30 juin.
                                  </p>
                              </div>
                          </section>
                          <section style="margin-top:20px;padding-right:100px;padding-left:100px;">
                              <div class="col-12 text-center">
                                  <u>Cours suivis dans la nouvelle structure:</u>
                              </div>
                          </section>
                          <section style="margin-top:20px;padding-right:100px;padding-left:100px;">
                              <div class="col-12 text-center">
                                  <b><span t-field="o.source_bloc_id.cycle_id" /> - <span
                                            t-field="o.source_bloc_id.level"
                                        /> du domaine <span
                                            t-field="o.source_bloc_domain_id"
                                        />, section <span
                                            t-field="o.source_bloc_section_id"
                                        />, option <span
                                            t-field="o.source_bloc_track_id"
                                        />, spécialité <span
                                            t-field="o.source_bloc_speciality_id"
                                        />.</b>
                              </div>
                          </section>
                          <section style="margin-top:50px;">
                              <div class="col-12">
                                  La présente attestation est délivrée pour renseignements administratifs.
                              </div>
                          </section>
                          <section style="margin-top:80px;">
                              <div class="col-4">
                                  LIEGE, le <span
                                        t-esc="datetime.datetime.now().strftime('%d-%m-%Y')"
                                    />
                              </div>
                          </section>
                          <section style="margin-top:80px;">
                              <div class="col-4">
                                  Le Directeur,<br />
                                  Nathanaël HARCQ
                              </div>
                          </section>
                        </div>
                    </div>
                </t>
            </t>
        </t>
    </template>

</odoo>
